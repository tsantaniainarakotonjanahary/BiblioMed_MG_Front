import{C as S,r as p,Q as k,j as e,o as r,a4 as D,L as b,a5 as g,a6 as F,a7 as A,a8 as m,a9 as c,aa as i,cd as T,D as I,t as O,v as $,K as M,ab as w}from"./index.e711043e.js";import{u as z,a as B,A as P,C as R,X as K}from"./App.c3ad3f0b.js";import{u as U,C as d}from"./index.esm.d825ec9d.js";import{I as v}from"./index.c4f32f95.js";import{i as V,a as q}from"./login-v2-dark.eff17e22.js";/* empty css                            */const J=({t:f,message:h})=>r("div",{className:"d-flex",children:[e("div",{className:"me-1",children:e(P,{size:"sm",color:"success",icon:e(R,{size:12})})}),r("div",{className:"d-flex flex-column",children:[e("div",{className:"d-flex justify-content-between",children:e(K,{size:12,className:"cursor-pointer",onClick:()=>w.dismiss(f.id)})}),e("span",{children:h})]})]}),Q={password:"",email:"",nom:"",prenom:"",passwordConf:"",adresse:"",numero:"",fonction:""},ae=()=>{const{skin:f}=z();B(),S();const[h,X]=p.exports.useState([{id:"jdi",nom:"PMM"},{id:"jdiK",nom:"USAID"}]),[u,N]=p.exports.useState(""),[x,y]=p.exports.useState(!1),C=()=>y(!x),E=p.exports.useContext(k),{control:t,setError:n,handleSubmit:j,formState:{errors:a}}=U({defaultValues:Q});return e("div",{className:"auth-wrapper auth-cover",children:r(D,{className:"auth-inner m-0",children:[e(b,{className:"brand-logo",to:"/",onClick:s=>s.preventDefault(),children:e("h2",{className:"brand-text text-primary ms-1",children:"Bibliomed"})}),e(g,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:e("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:e("img",{className:"img-fluid",src:f==="dark"?V:q,alt:"Register Cover"})})}),e(g,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:r(g,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[e(F,{tag:"h2",className:"fw-bold mb-1",children:"Inscription sur  BiblioMed! \u{1F44B}"}),r(A,{className:"auth-register-form mt-2",onSubmit:j(async s=>{if(Object.values(s).every(l=>l.length>0))try{const l=await fetch("https://bibliotheque-medical-back.vercel.app/user/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,password:s.password,passwordConf:s.passwordConf,nom:s.nom,prenom:s.prenom,fonction:s.fonction,entite:u.nom,numero:s.numero,adresse:s.adresse,idEntite:u.id})}),o=await l.json();l.ok?(E.update(o.user.ability),w(L=>e(J,{t:L,message:o.message}))):o.message==="Les mots de passe ne correspondent pas"?n("email",{type:"manual",message:"Les mots de passe ne correspondent pas"}):o.message==="Adresse e-mail non valide"?n("email",{type:"manual",message:"Adresse e-mail non valide"}):o.message==="Le mot de passe doit contenir au moins une lettre majuscule"?n("password",{type:"manual",message:"Le mot de passe doit contenir au moins une lettre majuscule"}):o.message==="Le mot de passe doit contenir au moins une lettre minuscule"?n("password",{type:"manual",message:"Le mot de passe doit contenir au moins une lettre minuscule"}):o.message==="Le mot de passe doit contenir au moins un chiffre"?n("password",{type:"manual",message:"Le mot de passe doit contenir au moins un chiffre"}):o.message==="Le mot de passe doit contenir au moins un caract\xE8re sp\xE9cial"?n("password",{type:"manual",message:"Le mot de passe doit contenir au moins un caract\xE8re sp\xE9cial"}):o.message==="Le mot de passe doit contenir au moins 8 caract\xE8res"?n("password",{type:"manual",message:"Le mot de passe doit contenir au moins 8 caract\xE8res"}):o.message==="E-mail est d\xE9j\xE0 utilis\xE9e"&&n("password",{type:"email",message:"E-mail est d\xE9j\xE0 utilis\xE9e"})}catch{n("err",{type:"manual",message:"Une erreur est survenue lors de la connexion. Veuillez r\xE9essayer plus tard."})}else for(const l in s)s[l].length===0&&n(l,{type:"manual"})}),children:[r("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"register-nom",children:" Nom "}),e(d,{id:"nom",name:"nom",control:t,render:({field:s})=>e(c,{autoFocus:!0,type:"text",placeholder:"votre nom",invalid:a.nom&&!0,...s})}),a.nom&&e(i,{children:a.nom.message})]}),r("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"register-nom",children:" Prenom "}),e(d,{id:"prenom",name:"prenom",control:t,render:({field:s})=>e(c,{autoFocus:!0,type:"text",placeholder:"votre prenom",invalid:a.prenom&&!0,...s})}),a.prenom&&e(i,{children:a.prenom.message})]}),r("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"register-nom",children:" Fonction "}),e(d,{id:"fonction",name:"fonction",control:t,render:({field:s})=>e(c,{autoFocus:!0,type:"text",placeholder:"votre fonction",invalid:a.fonction&&!0,...s})}),a.fonction&&e(i,{children:a.fonction.message})]}),e("br",{}),r(T,{isOpen:x,toggle:C,children:[e(I,{caret:!0,children:u.nom?u.nom:"Selectioner une entite"}),e(O,{children:h.map(s=>e($,{value:s.id,onClick:()=>N({nom:s.nom,id:s.id}),children:s.nom},s.id))})]}),e("br",{}),r("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"register-nom",children:" Tel "}),e(d,{id:"numero",name:"numero",control:t,render:({field:s})=>e(c,{autoFocus:!0,type:"text",placeholder:"votre numero",invalid:a.numero&&!0,...s})}),a.numero&&e(i,{children:a.numero.message})]}),r("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"register-nom",children:" Adresse "}),e(d,{id:"adresse",name:"adresse",control:t,render:({field:s})=>e(c,{autoFocus:!0,type:"text",placeholder:"votre adresse",invalid:a.adresse&&!0,...s})}),a.adresse&&e(i,{children:a.adresse.message})]}),r("div",{className:"mb-1",children:[e(m,{className:"form-label",for:"register-email",children:" Email "}),e(d,{id:"email",name:"email",control:t,render:({field:s})=>e(c,{autoFocus:!0,type:"email",placeholder:"votre email",invalid:a.email&&!0,...s})}),a.email&&e(i,{children:a.email.message})]}),r("div",{className:"mb-1",children:[e("div",{className:"d-flex justify-content-between",children:e(m,{className:"form-label",for:"register-password",children:" Mot de passe  "})}),e(d,{id:"password",name:"password",control:t,render:({field:s})=>e(v,{className:"input-group-merge",invalid:a.password&&!0,...s})}),a.password&&e(i,{children:a.password.message})]}),r("div",{className:"mb-1",children:[e("div",{className:"d-flex justify-content-between",children:e(m,{className:"form-label",for:"register-passwordConf",children:" Confirmation "})}),e(d,{id:"passwordConf",name:"passwordConf",control:t,render:({field:s})=>e(v,{className:"input-group-merge",invalid:a.passwordConf&&!0,...s})}),a.passwordConf&&e(i,{children:a.passwordConf.message})]}),e(M,{type:"submit",color:"primary",block:!0,children:" Demander \xE0 s'inscrire "}),a.err&&e(i,{children:a.err.message})]}),r("p",{className:"text-center mt-2",children:[e("span",{className:"me-25",children:"Deja inscrit?"}),e(b,{to:"/login",children:e("span",{children:"Se connecter"})})]})]})})]})})};export{ae as default};
