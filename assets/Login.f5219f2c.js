import{C as y,r as v,Q as N,j as e,o as s,a4 as w,L as m,a5 as d,a6 as E,a7 as C,a8 as u,a9 as h,aa as F,K as k,ab as f}from"./index.e711043e.js";import{u as S,a as j,g as L,A as z,C as G,X as I}from"./App.c3ad3f0b.js";import{u as M,C as g}from"./index.esm.d825ec9d.js";import{I as A}from"./index.c4f32f95.js";import{i as B,a as O}from"./login-v2-dark.eff17e22.js";/* empty css                            */const P=({t:n,name:i,role:c})=>s("div",{className:"d-flex",children:[e("div",{className:"me-1",children:e(z,{size:"sm",color:"success",icon:e(G,{size:12})})}),s("div",{className:"d-flex flex-column",children:[s("div",{className:"d-flex justify-content-between",children:[e("h6",{children:i}),e(I,{size:12,className:"cursor-pointer",onClick:()=>f.dismiss(n.id)})]}),s("span",{children:["You have successfully logged in as an ",c," user to Vuexy. Now you can start to explore. Enjoy!"]})]})]}),T={password:"admin",loginEmail:"admin@demo.com"},H=()=>{const{skin:n}=S();j();const i=y(),c=v.exports.useContext(N),{control:p,setError:o,handleSubmit:b,formState:{errors:t}}=M({defaultValues:T});return e("div",{className:"auth-wrapper auth-cover",children:s(w,{className:"auth-inner m-0",children:[s(m,{className:"brand-logo",to:"/",onClick:a=>a.preventDefault(),children:[s("svg",{viewBox:"0 0 139 95",version:"1.1",height:"28",children:[s("defs",{children:[s("linearGradient",{x1:"100%",y1:"10.5120544%",x2:"50%",y2:"89.4879456%",id:"linearGradient-1",children:[e("stop",{stopColor:"#000000",offset:"0%"}),e("stop",{stopColor:"#FFFFFF",offset:"100%"})]}),s("linearGradient",{x1:"64.0437835%",y1:"46.3276743%",x2:"37.373316%",y2:"100%",id:"linearGradient-2",children:[e("stop",{stopColor:"#EEEEEE",stopOpacity:"0",offset:"0%"}),e("stop",{stopColor:"#FFFFFF",offset:"100%"})]})]}),e("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e("g",{id:"Artboard",transform:"translate(-400.000000, -178.000000)",children:e("g",{id:"Group",transform:"translate(400.000000, 178.000000)",children:e("path",{id:"path0",fill:"url(#linearGradient-1)",d:"M13.9,23.7c-1.3,0-2.5,0.5-3.4,1.4L0.9,36.5c-1.9,1.9-1.9,4.9,0,6.8l9.1,9.1c0.9,0.9,2.1,1.4,3.4,1.4c1.3,0,2.5-0.5,3.4-1.4l9.1-9.1c1.9-1.9,1.9-4.9,0-6.8l-9.1-9.1C16.4,24.2,15.2,23.7,13.9,23.7z M13.9,33.2c-0.6,0-1.2-0.2-1.7-0.7l-5.5-5.5c-0.9-0.9-0.9-2.3,0-3.2l5.5-5.5c0.9-0.9,2.3-0.9,3.2,0l5.5,5.5c0.9,0.9,0.9,2.3,0,3.2l-5.5,5.5C15.1,33,14.5,33.2,13.9,33.2z"})})})})]}),e("h2",{className:"brand-text text-primary ms-1",children:"BiblioMed"})]}),e(d,{className:"d-none d-lg-flex align-items-center p-5",lg:"8",sm:"12",children:e("div",{className:"w-100 d-lg-flex align-items-center justify-content-center px-5",children:e("img",{className:"img-fluid",src:n==="dark"?B:O,alt:"Login Cover"})})}),e(d,{className:"d-flex align-items-center auth-bg px-2 p-lg-5",lg:"4",sm:"12",children:s(d,{className:"px-xl-2 mx-auto",sm:"8",md:"6",lg:"12",children:[e(E,{tag:"h2",className:"fw-bold mb-1",children:"Welcome to Bibliomed! \u{1F44B}"}),s(C,{className:"auth-login-form mt-2",onSubmit:b(async a=>{if(Object.values(a).every(l=>l.length>0))try{const l=await fetch("https://bibliotheque-medical-back.vercel.app/user/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.loginEmail,password:a.password})}),r=await l.json();l.ok?(localStorage.setItem("userData",JSON.stringify(r.user)),localStorage.setItem("token",r.token),c.update(r.user.ability),i(L(r.user.role)),i(0),f(x=>e(P,{t:x,role:r.user.role,name:r.user.nom+" "+r.user.prenom}))):r.message==="Utilisateur non trouv\xE9"?o("loginEmail",{type:"manual",message:"Email invalide"}):r.message==="Utilisateur non valid\xE9"?o("password",{type:"manual",message:"Vous devez \xEAtre valid\xE9 par l'administrateur pour vous connecter."}):r.message==="Mot de passe incorrect"&&o("password",{type:"manual",message:"Mot de passe incorrect"})}catch(l){console.error(l),o("password",{type:"manual",message:"Une erreur est survenue lors de la connexion. Veuillez r\xE9essayer plus tard."})}else for(const l in a)a[l].length===0&&o(l,{type:"manual"})}),children:[s("div",{className:"mb-1",children:[e(u,{className:"form-label",for:"login-email",children:"Email"}),e(g,{id:"loginEmail",name:"loginEmail",control:p,render:({field:a})=>e(h,{autoFocus:!0,type:"email",placeholder:"john@example.com",invalid:t.loginEmail&&!0,...a})}),t.loginEmail&&e(F,{children:t.loginEmail.message})]}),s("div",{className:"mb-1",children:[s("div",{className:"d-flex justify-content-between",children:[e(u,{className:"form-label",for:"login-password",children:"Password"}),e(m,{to:"/forgot-password",children:e("small",{children:"Forgot Password?"})})]}),e(g,{id:"password",name:"password",control:p,render:({field:a})=>e(A,{className:"input-group-merge",invalid:t.password&&!0,...a})})]}),s("div",{className:"form-check mb-1",children:[e(h,{type:"checkbox",id:"remember-me"}),e(u,{className:"form-check-label",for:"remember-me",children:"Remember Me"})]}),e(k,{type:"submit",color:"primary",block:!0,children:"Sign in"})]}),s("p",{className:"text-center mt-2",children:[e("span",{className:"me-25",children:"New on our platform?"}),e(m,{to:"/register",children:e("span",{children:"Create an account"})})]})]})})]})})};export{H as default};
